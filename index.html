<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TAIPEI OG// AFTERDARK â€” Hidden Chill Spots</title>
  <meta name="description" content="Cyberpunk single-page HTML app for Taipei chill spots (legal)." />
  <style>
    :root{
      --bg0:#07070a;
      --bg1:#0b1020;
      --neonG:#39ff14;
      --neonP:#b026ff;
      --warm:#ff8a00;
      --txt:#e8e8f0;
      --muted:#a7a7c2;
      --card:rgba(11,16,32,.62);
      --stroke:rgba(176,38,255,.35);
      --glowG: 0 0 18px rgba(57,255,20,.55);
      --glowP: 0 0 18px rgba(176,38,255,.55);
      --shadow: 0 10px 30px rgba(0,0,0,.55);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      color:var(--txt);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(176,38,255,.20), transparent 60%),
        radial-gradient(1000px 600px at 80% 30%, rgba(57,255,20,.16), transparent 60%),
        radial-gradient(900px 600px at 50% 90%, rgba(255,138,0,.10), transparent 65%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    .grid::before{
      content:"";
      position:fixed; inset:0;
      background:
        linear-gradient(rgba(255,255,255,.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.03) 1px, transparent 1px);
      background-size: 44px 44px;
      mix-blend-mode: overlay;
      pointer-events:none;
      opacity:.35;
    }

    .grid::after{
      content:"";
      position:fixed; inset:-20%;
      background: repeating-linear-gradient(
        180deg,
        rgba(0,0,0,0) 0px,
        rgba(0,0,0,0) 2px,
        rgba(0,0,0,.18) 3px
      );
      pointer-events:none;
      opacity:.25;
      transform: translateZ(0);
      animation: drift 9s linear infinite;
    }
    @keyframes drift{
      0%{transform:translateY(-6%)}
      100%{transform:translateY(6%)}
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:24px 18px 56px;
      position:relative;
    }

    .topbar{
      display:flex;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      flex-wrap:wrap;
      padding:8px 0 18px;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:8px;
      min-width:260px;
    }

    .title{
      font-weight:900;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:22px;
      line-height:1.1;
      position:relative;
      display:inline-block;
      filter: drop-shadow(var(--glowP));
    }

    .title .glitch{
      position:relative;
      display:inline-block;
    }
    .title .glitch::before,
    .title .glitch::after{
      content:attr(data-text);
      position:absolute; left:0; top:0;
      opacity:.8;
      clip-path: inset(0 0 0 0);
      transform:translate(0,0);
      pointer-events:none;
    }
    .title .glitch::before{
      color:var(--neonG);
      text-shadow: var(--glowG);
      animation: glitch1 2.6s infinite linear alternate-reverse;
    }
    .title .glitch::after{
      color:var(--neonP);
      text-shadow: var(--glowP);
      animation: glitch2 3.1s infinite linear alternate-reverse;
    }
    @keyframes glitch1{
      0%{clip-path: inset(80% 0 0 0); transform:translate(-1px,-1px)}
      10%{clip-path: inset(10% 0 70% 0); transform:translate(2px,0)}
      20%{clip-path: inset(50% 0 20% 0); transform:translate(-2px,1px)}
      35%{clip-path: inset(0 0 82% 0); transform:translate(1px,-2px)}
      50%{clip-path: inset(40% 0 40% 0); transform:translate(-1px,2px)}
      65%{clip-path: inset(78% 0 4% 0); transform:translate(2px,-1px)}
      80%{clip-path: inset(20% 0 55% 0); transform:translate(-2px,0)}
      100%{clip-path: inset(60% 0 18% 0); transform:translate(1px,1px)}
    }
    @keyframes glitch2{
      0%{clip-path: inset(0 0 85% 0); transform:translate(1px,1px)}
      12%{clip-path: inset(65% 0 10% 0); transform:translate(-2px,0)}
      25%{clip-path: inset(25% 0 55% 0); transform:translate(2px,-1px)}
      40%{clip-path: inset(55% 0 25% 0); transform:translate(-1px,2px)}
      55%{clip-path: inset(10% 0 75% 0); transform:translate(1px,-2px)}
      70%{clip-path: inset(85% 0 0% 0); transform:translate(-2px,1px)}
      100%{clip-path: inset(35% 0 35% 0); transform:translate(2px,0)}
    }

    .subtitle{
      color:var(--muted);
      font-size:13px;
      letter-spacing:.02em;
      max-width:520px;
    }

    .pillrow{display:flex; gap:8px; flex-wrap:wrap;}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      box-shadow: inset 0 0 0 1px rgba(176,38,255,.08);
      font-size:12px; color:var(--muted);
    }
    .dot{width:8px; height:8px; border-radius:99px; background:var(--neonG); box-shadow: var(--glowG);}
    .dot.p{background:var(--neonP); box-shadow: var(--glowP)}
    .dot.w{background:var(--warm); box-shadow:0 0 16px rgba(255,138,0,.45)}

    .panel{
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap:16px;
      align-items:start;
      margin-top:10px;
    }
    @media (max-width: 900px){ .panel{grid-template-columns:1fr} }

    .card{
      background: var(--card);
      border:1px solid rgba(255,255,255,.09);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; inset:0;
      border-radius: var(--radius);
      box-shadow: inset 0 0 0 1px rgba(57,255,20,.06), inset 0 0 0 2px rgba(176,38,255,.05);
      pointer-events:none;
    }

    .controls{
      padding:14px;
      display:grid;
      grid-template-columns: 1.3fr .7fr .7fr auto;
      gap:10px;
      align-items:center;
    }
    @media (max-width: 900px){
      .controls{grid-template-columns:1fr 1fr;}
      .controls .span2{grid-column:1/-1}
    }

    input, select{
      width:100%;
      padding:11px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color: var(--txt);
      outline:none;
      box-shadow: inset 0 0 0 1px rgba(176,38,255,.08);
    }
    input:focus, select:focus{
      border-color: rgba(57,255,20,.35);
      box-shadow: 0 0 0 3px rgba(57,255,20,.12), inset 0 0 0 1px rgba(57,255,20,.10);
    }
    select option{background:var(--bg1)}

    .btn{
      border:none;
      padding:11px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:700;
      letter-spacing:.02em;
      color:var(--txt);
      background: linear-gradient(90deg, rgba(176,38,255,.55), rgba(57,255,20,.35));
      box-shadow: 0 0 0 1px rgba(255,255,255,.12), var(--shadow);
      transition: transform .12s ease, filter .12s ease;
      white-space:nowrap;
    }
    .btn:hover{transform: translateY(-1px); filter:brightness(1.06)}
    .btn:active{transform: translateY(0px); filter:brightness(.98)}
    .btn.secondary{
      background: rgba(0,0,0,.28);
      border:1px solid rgba(255,255,255,.12);
      box-shadow:none;
      font-weight:600;
    }

    .list{
      padding: 0 14px 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .spot{
      padding:12px 12px 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      position:relative;
      overflow:hidden;
    }
    .spot:hover{
      border-color: rgba(176,38,255,.26);
      box-shadow: 0 0 0 3px rgba(176,38,255,.10);
    }

    .spotHead{display:flex; justify-content:space-between; gap:10px; align-items:flex-start;}
    .spotTitle{font-weight:800; letter-spacing:.02em; margin:0; font-size:15px; line-height:1.2;}
    .spotMeta{
      color:var(--muted);
      font-size:12px;
      margin-top:4px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .tag{
      padding:3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-size:11px;
    }
    .tag.g{border-color: rgba(57,255,20,.25); color: rgba(150,255,170,.95)}
    .tag.p{border-color: rgba(176,38,255,.25); color: rgba(220,170,255,.95)}
    .tag.w{border-color: rgba(255,138,0,.25); color: rgba(255,200,140,.95)}

    .spotBody{margin-top:10px; color: rgba(232,232,240,.92); font-size:13px; line-height:1.55;}
    .spotActions{
      margin-top:10px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }

    .miniRow{display:flex; gap:8px; flex-wrap:wrap; align-items:center;}
    .miniBtn{
      padding:8px 10px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color: var(--txt);
      cursor:pointer;
      font-size:12px;
      font-weight:700;
    }
    .miniBtn:hover{border-color: rgba(57,255,20,.25); box-shadow: 0 0 0 3px rgba(57,255,20,.10)}
    .miniBtn.heart{
      display:inline-flex; align-items:center; gap:8px;
      border-color: rgba(176,38,255,.25);
    }
    .miniBtn.heart.on{
      box-shadow: 0 0 0 3px rgba(176,38,255,.12);
      background: rgba(176,38,255,.14);
    }

    .pager{
      padding: 0 14px 16px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    .pageBtn{
      padding:8px 10px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color: var(--txt);
      cursor:pointer;
      font-size:12px;
      font-weight:800;
      min-width:38px;
      text-align:center;
    }
    .pageBtn:hover{border-color: rgba(176,38,255,.26); box-shadow: 0 0 0 3px rgba(176,38,255,.10)}
    .pageBtn.on{
      background: rgba(57,255,20,.12);
      border-color: rgba(57,255,20,.35);
      box-shadow: 0 0 0 3px rgba(57,255,20,.10);
    }
    .pageBtn:disabled{
      opacity:.45;
      cursor:not-allowed;
      box-shadow:none;
    }

    .side{padding:14px; display:flex; flex-direction:column; gap:12px;}
    .stat{
      padding:12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .stat h3{
      margin:0 0 8px;
      font-size:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color: rgba(232,232,240,.90);
    }
    .stat p{margin:0; color: var(--muted); font-size:12px; line-height:1.6;}

    .footer{
      margin-top:18px;
      color: rgba(167,167,194,.9);
      font-size:12px;
      line-height:1.6;
      padding: 0 4px;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      padding:2px 6px;
      border-radius: 8px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(232,232,240,.92);
      font-size:11px;
    }

    .modalBack{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:99;
    }
    .modal{
      width:min(680px, 96vw);
      background: rgba(11,16,32,.78);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modalHead{
      display:flex; justify-content:space-between; align-items:center;
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalHead h2{
      margin:0;
      font-size:14px;
      letter-spacing:.08em;
      text-transform:uppercase;
    }
    .modalBody{padding:14px}
    .formGrid{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    @media (max-width: 680px){ .formGrid{grid-template-columns:1fr} }

    textarea{
      width:100%;
      min-height: 92px;
      resize: vertical;
      padding:11px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color: var(--txt);
      outline:none;
      box-shadow: inset 0 0 0 1px rgba(176,38,255,.08);
    }
    .modalFoot{
      padding:12px 14px 14px;
      display:flex;
      gap:10px;
      justify-content:flex-end;
      border-top:1px solid rgba(255,255,255,.10);
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(232,232,240,.92);
      font-size:12px;
      display:none;
      z-index:100;
      box-shadow: var(--shadow);
    }
    a{color:rgba(150,255,170,.92)}
  </style>
</head>

<body class="grid">
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="title">
          <span class="glitch" data-text="TAIPEI OG// AFTERDARK">TAIPEI OG// AFTERDARK</span>
        </div>
        <div class="subtitle">
          åˆæ³•çš„ã€Œchill spotsã€è³‡æ–™åº«ï¼šå†·é–€æ²³æ¿±å¤œé¨ã€éç†±é–€å¤œæ™¯é»ã€å·¥æ¥­éœ“è™¹è¡—æ‹ã€‚å¯æœå°‹/ç¯©é¸/æ”¶è—/è‡ªè¨‚æ–°å¢ã€‚
        </div>
        <div class="pillrow" aria-label="status pills">
          <div class="pill"><span class="dot"></span> Live filter</div>
          <div class="pill"><span class="dot p"></span> Shared list (remote JSON)</div>
          <div class="pill"><span class="dot w"></span> Personal add (local)</div>
        </div>
      </div>

      <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end;">
        <button class="btn secondary" id="btnSync" title="Fetch latest spots.json">Sync</button>
        <button class="btn secondary" id="btnExport" title="Export your merged spots as JSON">Export</button>
        <button class="btn secondary" id="btnImport" title="Import a JSON list (local)">Import</button>
        <button class="btn" id="btnAdd">+ Add spot</button>
      </div>
    </div>

    <div class="panel">
      <div class="card">
        <div class="controls">
          <input id="q" type="search" placeholder="Searchâ€¦ (name / district / tags / vibe)" autocomplete="off" />
          <select id="district">
            <option value="">All districts</option>
          </select>
          <select id="tag">
            <option value="">All tags</option>
          </select>
          <button class="btn secondary" id="btnClear" title="Clear filters">Clear</button>

          <div class="span2" style="display:flex; justify-content:space-between; align-items:center; gap:10px;">
            <div style="color:var(--muted); font-size:12px;">
              Tip: <span class="kbd">/</span> focus search Â· <span class="kbd">F</span> favorites Â· <span class="kbd">1..9</span> jump pages
            </div>
            <div style="color:var(--muted); font-size:12px;">
              Results <span id="count">0</span> Â· Page <span id="pageInfo">1/1</span>
            </div>
          </div>
        </div>

        <div class="list" id="list"></div>
        <div class="pager" id="pager"></div>
      </div>

      <div class="card">
        <div class="side">
          <div class="stat">
            <h3>How it works</h3>
            <p>
              âœ… å…±ç”¨æ¸…å–®ï¼šå¾é ç«¯ <span class="kbd">spots.json</span> è®€å–ï¼ˆæ‰€æœ‰äººä¸€è‡´ï¼‰<br/>
              âœ… æ”¶è—ï¼šæ¯å€‹äººå„è‡ªå­˜åœ¨ç€è¦½å™¨ï¼ˆlocalStorageï¼‰<br/>
              âœ… Add spotï¼šé è¨­æ˜¯ã€Œä½ è‡ªå·±ç§äººçš„ã€æœ¬æ©Ÿæ–°å¢ï¼ˆä¸æœƒå›å¯«åˆ°é ç«¯ï¼‰
            </p>
          </div>

          <div class="stat">
            <h3>Legal note</h3>
            <p>
              é€™å€‹æ¨¡æ¿åªæ•´ç†ã€Œåˆæ³•ã€çš„å¤œé¨/å¤œæ™¯/è¡—æ‹/æ•£æ­¥è³‡è¨Šã€‚è«‹éµå®ˆå ´åŸŸè¦ç¯„ã€æ³¨æ„å®‰å…¨èˆ‡éŸ³é‡ã€åƒåœ¾å¸¶èµ°ã€‚
            </p>
          </div>

          <div class="stat">
            <h3>Remote JSON</h3>
            <p>
              ä½ åªè¦æ›´æ–°é ç«¯ <span class="kbd">spots.json</span>ï¼ˆcommitï¼‰ï¼Œå¤§å®¶å°±æœƒçœ‹åˆ°æœ€æ–°ç‰ˆã€‚<br/>
              å¦‚æœä½ æœªä¾†æƒ³ã€Œè®“æ‰€æœ‰äººæ–°å¢å¾Œä¹Ÿèƒ½åŒæ­¥ã€ï¼Œé‚£å°±éœ€è¦å¾Œç«¯ï¼ˆä¾‹å¦‚ Supabase/Firebaseï¼‰ã€‚
            </p>
          </div>

          <div class="stat">
            <h3>Shortcuts</h3>
            <p>
              <span class="kbd">/</span> æœå°‹ Â· <span class="kbd">Esc</span> æ¸…ç©º/é—œé–‰<br/>
              <span class="kbd">F</span> æ”¶è—æ¨¡å¼ Â· <span class="kbd">1..9</span> è·³é 
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      ä½ è¦å†æ›´ç¡¬æ ¸ï¼šé›¨å¤©æ¨¡å¼ / åœ°åœ–å…§åµŒ / åŸå¸‚åˆ‡æ› / tags çµ±ä¸€å­—å…¸ï¼Œæˆ‘éƒ½å¯ä»¥ç¹¼çºŒå¹«ä½ å‡ç´šã€‚
    </div>
  </div>

  <!-- Modal -->
  <div class="modalBack" id="modalBack" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modalHead">
        <h2 id="modalTitle">ADD SPOT</h2>
        <button class="miniBtn" id="btnClose">Close</button>
      </div>
      <div class="modalBody">
        <div class="formGrid">
          <input id="m_name" placeholder="Name (e.g., æ´²ç¾æ©‹ä¸‹æ¥µç°¡å¤œç·š)" />
          <input id="m_district" placeholder="District (e.g., å£«æ—å€)" />
          <input id="m_tags" placeholder="Tags (comma) (e.g., River, Bike, Industrial)" />
          <input id="m_best" placeholder="Best time (e.g., 21:00â€“01:00)" />
          <input id="m_lat" placeholder="Lat (optional)" />
          <input id="m_lng" placeholder="Lng (optional)" />
        </div>
        <div style="margin-top:10px">
          <textarea id="m_notes" placeholder="Notes / vibe / how to enjoy (legal activities only)"></textarea>
        </div>
        <div style="margin-top:10px">
          <input id="m_link" placeholder="Link (optional) â€” e.g., IG / article / place page" />
        </div>
      </div>
      <div class="modalFoot">
        <button class="btn secondary" id="btnCancel">Cancel</button>
        <button class="btn" id="btnSave">Save</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // =============================
    // Remote JSON config
    // æŠŠ spots.json æ”¾åœ¨åŒä¸€å€‹è³‡æ–™å¤¾å°±ç”¨ "./spots.json"
    // å¦‚æœä½ æ”¾åˆ¥çš„åœ°æ–¹ï¼Œæ”¹æˆå®Œæ•´ URL
    // =============================
    const REMOTE_SPOTS_URL = new URL("./spots.json", location.href).toString();

    // ---------- Storage keys ----------
    const KEY_CACHE_SPOTS = "afterdark_cache_spots_v2"; // remote cache
    const KEY_USER_SPOTS  = "afterdark_user_spots_v2";  // personal additions
    const KEY_FAVS        = "afterdark_favs_v1";

    const PAGE_SIZE = 10;

    // ---------- Fallback seed (only used if no cache + remote fails) ----------
    const fallbackSeed = [
    { id:"fallback-001", name:"å¤§ç¨»åŸ•ç¢¼é ­å¤œé¢¨", district:"å¤§åŒå€", tags:["River","Night view","Walk"], vibe:"éœ“è™¹åå°„ï¼‹æ²³é¢¨ï¼Œé©åˆæ•£æ­¥æ”¾ç©º", bestTime:"20:30â€“01:00", notes:"é•·æ›å…‰æŠ“åå…‰ï¼›äººå¤šæ™‚èµ°åˆ°æ²³å²¸é‚Šç·£æ®µæ›´å®‰éœã€‚" }, { "id":"ad-002","name":"è±¡å±±ï¼ˆè¼ƒçŸ­æ®µè§€æ™¯å¹³å°ï¼‰","district":"ä¿¡ç¾©å€","tags":["Night view","Hike","Photo"],"vibe":"åŸå¸‚å¿ƒè‡Ÿä¸Šæ–¹çš„å…‰æµ·","bestTime":"19:00â€“23:30","notes":"å¸¶æ°´ã€ç©¿å¥½èµ°çš„é‹ï¼›é¿é–‹é€±æœ«å°–å³°æ›´chillã€‚" },
    { id:"fallback-003", name:"å¯¶è—å·– Ã— æ²³å ¤é‚Š","district":"ä¸­æ­£å€","tags":["Walk","Quiet","Art"],"vibe":"å»¢å¢Ÿè—è¡“èšè½ï¼‹æ²³å ¤å¤œæ•£æ­¥","bestTime":"18:30â€“22:30","notes":"ç™½å¤©é€›èšè½ï¼Œæ™šä¸Šå»æ²³å ¤å¹é¢¨ï¼›æ‹ç‰†é¢æè³ªï¼‹æ˜é»ƒç‡ˆå¾ˆæœ‰å‘³é“ã€‚" },
    { "id":"ad-004","name":"åŒ—æŠ•åœ–æ›¸é¤¨å‘¨é‚Šå¤œæ­¥ï¼ˆæº«æ³‰å€æ°›åœï¼‰","district":"åŒ—æŠ•å€","tags":["Quiet","Walk","Hot spring"],"vibe":"è’¸æ°£æ„Ÿï¼‹æš—å…‰è·¯ç‡ˆï¼Œåƒé€²å…¥å¦ä¸€å€‹å€åŸŸ","bestTime":"19:00â€“22:00","notes":"æ…¢èµ°ã€çœ‹è’¸æ°£å’Œæ¨¹å½±ï¼›æ³¨æ„å„å€åŸŸé–‹æ”¾æ™‚é–“ã€‚" },
    { "id":"ad-005","name":"è‡ªä¾†æ°´åœ’å€å‘¨é‚Šæ²³å²¸è·¯æ®µ","district":"ä¸­æ­£å€","tags":["River","Bike","Walk"],"vibe":"é»‘æ°´é¢ï¼‹æ©‹å…‰ï¼Œé©åˆå¤œé¨/å¤œèµ°","bestTime":"20:00â€“00:30","notes":"YouBike å°åœˆå·¡èˆªï¼›æ‹æ©‹åº•åå…‰å¾ˆè³½åšã€‚" },
    { "id":"ad-006","name":"æ¾å±±æ–‡å‰µå‘¨é‚Šï¼ˆå¤œè£¡çš„ç©ºæ°£æ„Ÿï¼‰","district":"ä¿¡ç¾©å€","tags":["Walk","Photo","City"],"vibe":"å·¥æ¥­éºè·¡ï¼‹å¤œå…‰","bestTime":"19:30â€“23:00","notes":"ä¸ç”¨é€²åœ’å€ï¼Œå¤–åœè¡—æ™¯ä¹Ÿå¥½æ‹ï¼›æ‰¾é»‘ç‰†ï¼‹éœ“è™¹å°æ¯”ã€‚" },
    { "id":"ad-007","name":"å¤©æ¯å®‰éœå¡é“ï¼ˆä½å®…å€å¤œæ™¯æ•£æ­¥ï¼‰","district":"å£«æ—å€","tags":["Quiet","Walk","City"],"vibe":"ä½å¯†åº¦ä½å®…å€ï¼‹æ˜é»ƒç‡ˆå…‰ï¼Œåƒé›»å½±","bestTime":"20:00â€“23:30","notes":"æ…¢èµ°èŠå¤©è·¯ç·šï¼›æ³¨æ„éŸ³é‡ã€å°Šé‡ä½æˆ¶ã€‚" },
    { "id":"ad-008","name":"å—æ¸¯è€å·¥æ¥­è¡—æ™¯ï¼ˆæ”å½±å–å‘ï¼‰","district":"å—æ¸¯å€","tags":["Photo","Industrial","City"],"vibe":"é‹¼éµã€æ‹›ç‰Œã€ç©ºæ› æ„Ÿï¼šç´” cyber","bestTime":"21:00â€“01:00","notes":"ä»¥è¡—æ‹/å»ºç¯‰å¹¾ä½•ç‚ºä¸»ï¼›æ³¨æ„å®‰å…¨èˆ‡ç§äººå€åŸŸã€‚" },
    { "id":"ad-009","name":"å½©è™¹æ©‹å¤œå…‰æ®µï¼ˆé¥’æ²³æ—ï¼‰","district":"æ¾å±±å€","tags":["Bridge","Night view","Photo"],"vibe":"éœ“è™¹ç·šæ¢ï¼‹æ²³é¢åå…‰","bestTime":"20:30â€“00:30","notes":"æ©‹ä¸Šé¢¨å¤§èˆ’æœï¼›ç”¨æ¬„æ†ç•¶å‰æ™¯åšé€è¦–å¾ˆç©©ã€‚" },
    { "id":"ad-010","name":"è¿é¢¨æ²³æ¿±å…¬åœ’ï¼ˆå¤œé¨ç›´ç·šï¼‰","district":"æ¾å±±å€","tags":["Bike","River","Quiet"],"vibe":"é•·ç›´ç·šè·¯ç‡ˆï¼‹ç©ºæ› æ„Ÿï¼šå¤œé¨å¤©å ‚","bestTime":"21:00â€“01:00","notes":"é¿é–‹å‡æ—¥ï¼›è·¯å£æ¸›é€Ÿã€æ³¨æ„è¡Œäººã€‚" },
    { "id":"ad-011","name":"å¤§ä½³æ²³æ¿±å…¬åœ’ï¼ˆæ©‹ä¸‹å…‰å½±ï¼‰","district":"ä¸­å±±å€","tags":["River","Photo","Walk"],"vibe":"æ©‹åº•å…‰å½±åƒé€²å…¥åœ°ä¸‹åŸå¸‚","bestTime":"20:00â€“00:00","notes":"æ‹æ©‹å¢©é‡è¤‡çµæ§‹å¾ˆè³½åšï¼›åˆ¥é€²æ–½å·¥å€ã€‚" },
    { "id":"ad-012","name":"ç¾å ¤æ²³æ¿±å…¬åœ’ï¼ˆå¤œé¢¨è‰åœ°æ®µï¼‰","district":"å…§æ¹–å€","tags":["River","Quiet","Walk"],"vibe":"è‰åœ°ï¼‹æ²³é¢¨ï¼‹é æ–¹æ¨“å…‰","bestTime":"19:30â€“23:30","notes":"æ…¢èµ°è½æ­Œï¼Œåƒåœ¾å¸¶èµ°ã€‚" },
    { "id":"ad-013","name":"é—œæ¸¡ç¢¼é ­æ²³å ¤ï¼ˆé æ™¯ï¼‹é¢¨ï¼‰","district":"åŒ—æŠ•å€","tags":["River","Quiet","Night view"],"vibe":"éƒŠå€æ„Ÿçš„å¤œï¼šé¢¨å¤§ã€è¦–é‡å¯¬","bestTime":"19:30â€“23:00","notes":"å¤©æ°£å¥½çœ‹é æ–¹ç‡ˆç«ï¼›æ³¨æ„ä¿æš–ã€‚" },
    { "id":"ad-014","name":"ç¤¾å­å³¶å ¤é˜²ï¼ˆå¤œé¨é•·ç·šï¼‰","district":"å£«æ—å€","tags":["Bike","Quiet","River"],"vibe":"é»‘è·¯ï¼‹è·¯ç‡ˆç¯€å¥æ„Ÿ","bestTime":"20:30â€“01:00","notes":"æš—è™•æ¸›é€Ÿï¼›çµä¼´æˆ–ä¿æŒè­¦è¦ºæ›´å¥½ã€‚" },
    { "id":"ad-015","name":"ç¦å·å±±å…¬åœ’ï¼ˆä½èª¿å¤œæ™¯é»ï¼‰","district":"å¤§å®‰å€","tags":["Night view","Walk","Quiet"],"vibe":"ä¹¾æ·¨ã€å®‰éœçš„åŸå¸‚ä¿¯ç°é»","bestTime":"19:00â€“23:00","notes":"æ¯”ç†±é–€æ™¯é»æ›´ä½åˆºæ¿€ï¼›æ³¨æ„åˆ¥æ‰“æ“¾é™„è¿‘ä½æˆ¶ã€‚" },
    { "id":"ad-016","name":"å¤§æ¹–å…¬åœ’ï¼ˆæ©‹èˆ‡æ¹–é¢åå…‰ï¼‰","district":"å…§æ¹–å€","tags":["Photo","Quiet","Park"],"vibe":"å€’å½±ï¼‹æ©‹ç·šæ¢","bestTime":"19:30â€“22:30","notes":"æ‰¾ç„¡é¢¨è§’åº¦æ‹å€’å½±ï¼›é¿å…é–ƒå…‰å½±éŸ¿ä»–äººã€‚" },
    { "id":"ad-017","name":"å—æ¸¯å…¬åœ’ï¼ˆå¤œè£¡çš„æ£®æ—æ„Ÿï¼‰","district":"å—æ¸¯å€","tags":["Park","Quiet","Walk"],"vibe":"åƒåŸå¸‚è£¡çš„é»‘æ£®æ—","bestTime":"19:00â€“22:00","notes":"èµ°ä¸»è¦è·¯å¾‘ï¼›æ³¨æ„åœ’å€è¦ç¯„èˆ‡æ™‚é–“ã€‚" },
    { "id":"ad-018","name":"ä¸­æ­£ç´€å¿µå ‚å¤–åœå»Šé“ï¼ˆå¤œå…‰ç©ºé–“ï¼‰","district":"ä¸­æ­£å€","tags":["Walk","Photo","City"],"vibe":"å°ç¨±å»Šé“ï¼‹æš—å…‰ï¼Œç§‘å¹»æ„Ÿ","bestTime":"19:00â€“22:30","notes":"èµ°å¤–åœæ›´chillï¼›é›¨å¤©ä¹Ÿå¥½æ‹ã€‚" },
    { "id":"ad-019","name":"å°å¤§æ¤°æ—ï¼èˆŸå±±è·¯å¤œæ®µï¼ˆæ ¡åœ’å…‰å½±ï¼‰","district":"å¤§å®‰å€","tags":["Walk","Quiet","Photo"],"vibe":"æ¨¹åˆ—ï¼‹è·¯ç‡ˆï¼Œä¹¾æ·¨å®‰éœ","bestTime":"20:00â€“23:00","notes":"å°Šé‡æ ¡åœ’è¦ç¯„ï¼›é©åˆæ•£æ­¥èŠå¤©ã€‚" },
    { "id":"ad-020","name":"æŒ‡å—å®®ï¼ˆå¤œæ™¯ï¼‹å±±åŸæ„Ÿï¼‰","district":"æ–‡å±±å€","tags":["Night view","Quiet","Walk"],"vibe":"å±±åŸç‡ˆç«ï¼‹å»Ÿå®‡è¼ªå»“","bestTime":"18:30â€“22:00","notes":"å°Šé‡å ´æ‰€ï¼›ä»¥æ•£æ­¥çœ‹å¤œæ™¯ç‚ºä¸»ã€‚" },

    /* ====== ä¸‹é¢æ˜¯æˆ‘æ–°å¢çš„ 30 å€‹ï¼šå†·é–€æ²³æ¿± / éç†±é–€å¤œæ™¯ / å·¥æ¥­è¡—æ‹ ====== */
    { "id":"ad-101","name":"æˆç¾å³å²¸æ²³æ¿±ï¼ˆå…§æ¹–æ®µï¼‰å¤œç·š","district":"å…§æ¹–å€","tags":["River","Bike","Industrial","Neon"],"vibe":"æ²³å²¸ï¼‹é«˜æ¶å†·å…‰ï¼Œé¨èµ·ä¾†åƒè·‘åœ¨å¤œåŸé‚Šç·£","bestTime":"21:00â€“01:00","notes":"é©åˆç›´ç·šå·¡èˆªï¼‹æ©‹å¢©å¹¾ä½•è¡—æ‹ï¼›æ³¨æ„è·¯å£èˆ‡è¡Œäººã€‚" },
    { "id":"ad-102","name":"æ½­ç¾å…¬åœ’å¤–å´æ²³å²¸ï¼ˆæš—å…‰æŠ˜è¿”æ®µï¼‰","district":"å…§æ¹–å€","tags":["River","Bike","Quiet","Minimal"],"vibe":"ä½å…‰ã€é¢¨ã€ç©ºæ› ï¼Œå¿ƒæœƒè®Šå¾ˆå®‰éœ","bestTime":"20:30â€“00:30","notes":"é©åˆè€³æ©Ÿæ…¢é¨ï¼›é›¨å¾Œè·¯é¢å¯èƒ½æ¿•æ»‘ã€‚" },
    { "id":"ad-103","name":"æ–°ç”Ÿé«˜æ¶æ©‹ä¸‹ï¼ˆæ¿±æ±Ÿè¡—ä¸€å¸¶ï¼‰å…‰å½±é•·å»Š","district":"ä¸­å±±å€","tags":["Industrial","Photo","Neon"],"vibe":"æ©‹ä¸‹é™°å½±ï¼‹è»Šæµå…‰è»Œï¼šç¡¬æ´¾å·¥æ¥­è³½åš","bestTime":"20:00â€“00:30","notes":"ç”¨æ¬„æ†/æŸ±åˆ—ç•¶å‰æ™¯ï¼›æ³¨æ„å®‰å…¨èˆ‡äº¤é€šã€‚" },
    { "id":"ad-104","name":"å¤§ç›´æ©‹ä¸‹åŸºéš†æ²³æ­¥é“ï¼ˆæ©‹å¢©å¹¾ä½•ï¼‰","district":"ä¸­å±±å€","tags":["River","Photo","Industrial"],"vibe":"æ©‹å¢©é‡è¤‡çµæ§‹ï¼‹æ°´é¢åå…‰","bestTime":"20:30â€“00:30","notes":"æ‹å¹¾ä½•ç·šæ¢è¶…ç©©ï¼›é¿å…é€²å…¥å°é–å€ã€‚" },
    { "id":"ad-105","name":"å…§æºæºªè‡ªç„¶æ­¥é“å…¥å£ï¼ˆå¤œåˆçŸ­èµ°ï¼‰","district":"å…§æ¹–å€","tags":["Walk","Quiet","Nature","Rainy"],"vibe":"æ¨¹å½±ï¼‹å¾®å…‰ï¼ŒåƒåŸå¸‚è£¡çš„å°å‰¯æœ¬","bestTime":"18:30â€“21:00","notes":"åªèµ°å‰æ®µèˆ‡ä¸»è·¯å¾‘ï¼›å¤œé–“ä»¥å®‰å…¨ç‚ºå…ˆã€‚" },
    { "id":"ad-106","name":"å…§æ¹–ç§‘æŠ€åœ’å€ï¼ˆç‘å…‰è·¯å¤œé–“ç·šæ¢ï¼‰","district":"å…§æ¹–å€","tags":["Industrial","Neon","Photo","City"],"vibe":"ç»ç’ƒ/é‡‘å±¬ç«‹é¢åå…‰ï¼Œå†·è‰²ç³»è¡—æ‹è–åœ°","bestTime":"20:00â€“23:30","notes":"é©åˆé›¨å¤©åå…‰ï¼›æ³¨æ„åˆ¥æ‰“æ“¾å¤§æ¨“å‡ºå…¥å£ã€‚" },
    { "id":"ad-107","name":"å—æ¸¯ç¶“è²¿åœ’å€é«˜æ¶ä¸‹ï¼ˆå†·å…‰è¡—æ™¯ï¼‰","district":"å—æ¸¯å€","tags":["Industrial","Neon","Photo"],"vibe":"æ–°è¡—å»“ï¼‹é«˜æ¶é™°å½±ï¼Œç•«é¢å¾ˆâ€œæœªä¾†å•†æ¥­å€â€","bestTime":"20:00â€“23:30","notes":"æ‰¾è·¯ç‡ˆèˆ‡ç»ç’ƒåå°„ï¼›ä»¥å…¬å…±å€åŸŸæ‹æ”ç‚ºä¸»ã€‚" },
    { "id":"ad-108","name":"å±±è±¬çªŸå‘¨é‚Šé«˜é»ï¼ˆé æ™¯è¦–è§’ï¼‰","district":"å—æ¸¯å€","tags":["Night view","Quiet","Photo"],"vibe":"ä¸æ˜¯ç†±é–€é»çš„é æ™¯ï¼šæ›´å®‰éœã€æ›´åƒè§€å¯Ÿè€…è¦–è§’","bestTime":"19:00â€“22:00","notes":"ä»¥å®‰å…¨å¯é”çš„å…¬å…±æ­¥é“/è¦–è§’ç‚ºä¸»ï¼›ä¸è¦èµ°ç„¡ç…§æ˜å°å¾‘ã€‚" },
    { "id":"ad-109","name":"æ¾å±±æ©Ÿå ´å¤–åœåœç±¬é“ï¼ˆé£›æ©Ÿç‡ˆï¼‹éœ“è™¹ï¼‰","district":"æ¾å±±å€","tags":["Photo","Neon","City"],"vibe":"é£›æ©Ÿèµ·é™ç‡ˆï¼‹åŸå¸‚éœ“è™¹ï¼šå¾ˆæœ‰é›»å½±æ„Ÿ","bestTime":"20:00â€“22:30","notes":"ç«™å®šæ‹å…‰è»Œï¼›æ³¨æ„äº¤é€šèˆ‡åœç•™è¦ç¯„ã€‚" },
    { "id":"ad-110","name":"æ´²ç¾æ©‹ä¸‹å ¤å¤–æ­¥é“ï¼ˆæ¥µç°¡é»‘è·¯ï¼‰","district":"å£«æ—å€","tags":["River","Bike","Minimal","Industrial"],"vibe":"æ¥µç°¡æš—ç·šï¼‹æ©‹ä¸‹ä½å…‰ï¼Œå¾ˆåƒæ½›è¡Œä»»å‹™","bestTime":"21:00â€“01:00","notes":"æš—è™•æ¸›é€Ÿï¼›é›¨å¤©æ›´æ»‘ï¼Œå®‰å…¨ç¬¬ä¸€ã€‚" },
    { "id":"ad-111","name":"ç™¾é½¡å·¦å²¸æ²³æ¿±ï¼ˆç¦æ¸¯è¡—ä¸€å¸¶ï¼‰å¤œé¨æ®µ","district":"å£«æ—å€","tags":["River","Bike","Quiet"],"vibe":"æ²³é¢¨ï¼‹è·¯ç‡ˆç¯€æ‹ï¼Œé•·ç·šèˆ’æœ","bestTime":"20:30â€“00:30","notes":"é©åˆç©©å®šé…é€Ÿï¼›æ³¨æ„å¤œé–“è¡Œäººèˆ‡ç‹—ã€‚" },
    { "id":"ad-112","name":"ç¤¾å­å¤§æ©‹ä¸‹ï¼ˆå ¤å¤–ç©ºæ› æ®µï¼‰","district":"å£«æ—å€","tags":["River","Bike","Industrial"],"vibe":"æ©‹å½±å·¨å¤§ã€ç©ºæ› æ„Ÿå¼·ï¼Œè¶…ç¡¬æ´¾","bestTime":"21:00â€“01:00","notes":"ä»¥ä¸»ç·šé“ç‚ºä¸»ï¼›é¿å…é€²å…¥ç…§æ˜ä¸è¶³å€ã€‚" },
    { "id":"ad-113","name":"å»¶å¹³æ²³æ¿±å…¬åœ’åŒ—æ®µï¼ˆé¢¨å¤§æš—ç·šï¼‰","district":"å¤§åŒå€","tags":["River","Bike","Quiet"],"vibe":"æ·¡æ°´æ²³é¢¨ï¼‹åŸå¸‚èƒŒå…‰ï¼Œä½èª¿è€Œä¹¾æ·¨","bestTime":"20:00â€“23:30","notes":"é©åˆå®‰éœå¤œé¨ï¼›ç•™æ„æ²³æ¿±äº¤æœƒå£ã€‚" },
    { "id":"ad-114","name":"å¿ å­æ©‹ä¸‹æ·¡æ°´æ²³æ®µï¼ˆéµæ§‹/å·¥æ¥­æ„Ÿï¼‰","district":"å¤§åŒå€","tags":["Industrial","Photo","River"],"vibe":"éµæ§‹ï¼‹é™°å½±ï¼‹æ°´é¢ï¼šè€æ´¾å·¥æ¥­è³½åš","bestTime":"20:30â€“00:30","notes":"æ‹æ©‹æ¢ç´°ç¯€å¾ˆæœ‰å‘³é“ï¼›æ³¨æ„å®‰å…¨å€åŸŸã€‚" },
    { "id":"ad-115","name":"ä¸­èˆˆæ©‹ä¸‹æ­¥é“ï¼ˆè»Šæµå…‰è»Œè¦–è§’ï¼‰","district":"è¬è¯å€","tags":["Photo","Industrial","City"],"vibe":"è»Šæµå…‰è»Œï¼‹æ©‹ä¸‹æš—éƒ¨ï¼Œå°æ¯”å¾ˆçˆ½","bestTime":"20:30â€“00:30","notes":"æ‰¾ç©©å®šæ¬„æ†ç•¶æ”¯æ’ï¼›æ³¨æ„äº¤é€šèˆ‡åœç•™ã€‚" },
    { "id":"ad-116","name":"è¯ä¸­æ²³æ¿±å…¬åœ’å—æ®µï¼ˆæ©‹ä¸‹å…‰å½±ï¼‰","district":"è¬è¯å€","tags":["River","Industrial","Photo"],"vibe":"æ©‹ä¸‹å·¨æŸ±ï¼‹å†·å…‰ï¼Œè¡—æ‹å¾ˆå…‡","bestTime":"21:00â€“01:00","notes":"æ‹å¹¾ä½•ï¼‹é™°å½±ï¼›é¿å…ååƒ»ç„¡ç…§æ˜æ®µã€‚" },
    { "id":"ad-117","name":"è¬æ¿å¤§æ©‹ä¸‹ï¼ˆå°åŒ—å´æ•£æ­¥æ®µï¼‰","district":"è¬è¯å€","tags":["River","Walk","Industrial"],"vibe":"æ©‹å½±ï¼‹æ²³é¢é»‘äº®ï¼Œåƒèµ°åœ¨åŸå¸‚æš—é¢","bestTime":"20:00â€“23:30","notes":"æ…¢èµ°æ‹åå…‰ï¼›æ³¨æ„å€‹äººç‰©å“èˆ‡å‘¨é‚Šç’°å¢ƒã€‚" },
    { "id":"ad-118","name":"æ™¯ç¾æºªæ²³å²¸ï¼ˆæœ¨æŸµæ®µï¼‰å¤œé¨ç·š","district":"æ–‡å±±å€","tags":["River","Bike","Quiet"],"vibe":"æºªå²¸æ›´ç”Ÿæ´»ã€æ›´å®‰éœçš„å¤œç·š","bestTime":"19:30â€“22:30","notes":"é©åˆçŸ­è·é›¢å·¡èˆªï¼›é¿å…å¤ªæ™šèµ°åˆ°ç„¡äººæ®µã€‚" },
    { "id":"ad-119","name":"ä»™è·¡å²©æ­¥é“å£å‰æ®µï¼ˆå¤œåˆï¼‰","district":"æ–‡å±±å€","tags":["Hike","Night view","Walk"],"vibe":"ä¸ç†±é–€ä½†æœ‰è¦–è§’ï¼šåŸå¸‚é‚Šç·£å¤œå…‰","bestTime":"18:30â€“21:00","notes":"åªèµ°å‰æ®µä¸»ç·šï¼›çµä¼´æ›´å®‰å¿ƒã€‚" },
    { "id":"ad-120","name":"èˆˆéš†å…¬åœ’é«˜è™•æ­¥é“ï¼ˆä½èª¿åŸå¸‚é æ™¯ï¼‰","district":"æ–‡å±±å€","tags":["Night view","Walk","Quiet"],"vibe":"ä½å®…å€çš„å®‰éœé«˜é»ï¼šä¸åµä¸æ“ ","bestTime":"19:00â€“22:00","notes":"ä»¥æ•£æ­¥æ”¾ç©ºç‚ºä¸»ï¼›æ³¨æ„ä½å€éŸ³é‡ã€‚" },
    { "id":"ad-121","name":"è»è‰¦å²©å‰æ®µè§€æ™¯ï¼ˆä¸èµ°æ·±ï¼‰","district":"åŒ—æŠ•å€","tags":["Hike","Night view","Rock"],"vibe":"å²©é¢ï¼‹é æ™¯ï¼šç¡¬æ´¾å¤œæ™¯è§’","bestTime":"18:00â€“21:00","notes":"å‚æ™šåˆ°å¤œåˆæœ€ä½³ï¼›å¤œé–“åˆ¥èµ°ç„¡ç…§æ˜å°å¾‘ã€‚" },
    { "id":"ad-122","name":"è²´å­å‘è¦ªå±±æ­¥é“å…¥å£ï¼ˆå¤œåˆçŸ­èµ°ï¼‰","district":"åŒ—æŠ•å€","tags":["Hike","Quiet","Nature"],"vibe":"é»‘æ£®æ—æ„Ÿçš„å…¥å£æ®µï¼Œå®‰éœä¸”é™å™ª","bestTime":"18:30â€“21:00","notes":"åªèµ°å‰æ®µï¼›å¸¶å°æ‰‹é›»æ›´å®‰å…¨ã€‚" },
    { "id":"ad-123","name":"é—œæ¸¡è‡ªç„¶å…¬åœ’å¤–åœå ¤å²¸ï¼ˆå¤§é¢¨é æ™¯ï¼‰","district":"åŒ—æŠ•å€","tags":["River","Quiet","Night view"],"vibe":"å¤§é¢¨ã€å¯¬è¦–é‡ã€é ç‡ˆç«","bestTime":"19:00â€“22:30","notes":"é©åˆå†·éœæ”¾ç©ºï¼›æ³¨æ„ä¿æš–èˆ‡å ´åŸŸè¦ç¯„ã€‚" },
    { "id":"ad-124","name":"é—œæ¸¡å®®å‘¨é‚Šæ²³å ¤ï¼ˆå»Ÿå®‡è¼ªå»“ï¼‹æ²³é¢¨ï¼‰","district":"åŒ—æŠ•å€","tags":["River","Walk","Night view"],"vibe":"äººæ–‡è¼ªå»“ï¼‹å¤œé¢¨ï¼Œåƒé€²å…¥å¦ä¸€å±¤å°åŒ—","bestTime":"19:00â€“22:30","notes":"å°Šé‡å ´æ‰€ï¼›ä»¥æ•£æ­¥æ‹æ”ç‚ºä¸»ã€‚" },
    { "id":"ad-125","name":"ç¦å’Œæ©‹å°åŒ—ç«¯æ²³å ¤ï¼ˆå¤œé¨æŠ˜è¿”é»ï¼‰","district":"ä¸­æ­£å€","tags":["River","Bike","City"],"vibe":"æ²³å ¤æŠ˜è¿”å¾ˆé †ï¼ŒåŸå¸‚å…‰åœ¨èƒŒå¾Œæ¨ä½ ","bestTime":"20:30â€“00:30","notes":"é©åˆç•¶å¤œé¨â€œå›ç¨‹å„€å¼é»â€ï¼›æ³¨æ„æ©‹ä¸‹äº¤æœƒå£ã€‚" },
    { "id":"ad-126","name":"å…¬é¤¨å‘¨é‚Šæ²³æ¿±ï¼ˆæ©‹ä¸‹é™°å½±æ®µï¼‰","district":"ä¸­æ­£å€","tags":["River","Walk","Industrial"],"vibe":"æ©‹ä¸‹é™°å½±ï¼‹æ°´é¢åå…‰ï¼Œç•«é¢å¾ˆä¹¾","bestTime":"20:00â€“23:30","notes":"èµ°ä¸»è¦å‹•ç·šï¼›é¿å…ååƒ»å²”è·¯ã€‚" },
    { "id":"ad-127","name":"å¤–é›™æºªæ²³ç•”æ­¥é“ï¼ˆè‡³å–„è·¯ä¸€å¸¶å¤œåˆï¼‰","district":"å£«æ—å€","tags":["River","Walk","Quiet"],"vibe":"æºªç•”æ›´ç”Ÿæ´»ã€æ›´ä½èª¿çš„å¤œèµ°","bestTime":"19:00â€“22:00","notes":"åªèµ°äº®çš„æ®µï¼›æ³¨æ„è…³ä¸‹èˆ‡å‘¨é‚Šç’°å¢ƒã€‚" },
    { "id":"ad-128","name":"åŠå—å±±æ­¥é“å£çŸ­æ®µï¼ˆå¤œæ™¯é‚Šç·£ï¼‰","district":"ä¸­å±±å€","tags":["Hike","Night view","Walk"],"vibe":"ä¸æ˜¯ç†±é–€è§€æ™¯é»çš„â€œé‚Šç·£è¦–è§’â€","bestTime":"18:30â€“21:00","notes":"çŸ­æ®µå³å¯ï¼›å¤ªæ™šä¸èµ°æ·±ã€‚" },
    { "id":"ad-129","name":"å››ç¸å±±ç³»ï¼ˆè™å±±å‰æ®µï¼‰å¤œåˆ","district":"ä¿¡ç¾©å€","tags":["Walk","Hike","Quiet"],"vibe":"æ¨¹å½±ï¼‹å¾®å…‰ï¼ŒåŸå¸‚åƒåœ¨é è™•å‘¼å¸","bestTime":"18:30â€“21:00","notes":"èµ°ä¸»ç·šå‰æ®µï¼›çµä¼´æ›´å¥½ã€‚" },
    { "id":"ad-130","name":"å¤§ç›´/æ¿±æ±Ÿä¸€å¸¶å ¤å¤–ï¼ˆå¤œæ‹å†·å…‰æ®µï¼‰","district":"ä¸­å±±å€","tags":["River","Photo","Neon"],"vibe":"å†·å…‰è·¯ç‡ˆï¼‹é»‘æ°´é¢ï¼Œæ¥µç°¡è³½åš","bestTime":"20:30â€“00:30","notes":"æ‰¾åå°„è§’åº¦æ‹æ°´é¢ï¼›æ³¨æ„å®‰å…¨ã€‚" }
    ];

    // ---------- Load / Save ----------
    function loadJSON(key, fallback){
      try{
        const raw = localStorage.getItem(key);
        if(!raw) return fallback;
        return JSON.parse(raw);
      }catch(e){ return fallback; }
    }
    function saveJSON(key, val){
      localStorage.setItem(key, JSON.stringify(val));
    }

    function loadCacheSpots(){
      const arr = loadJSON(KEY_CACHE_SPOTS, null);
      return Array.isArray(arr) ? arr : null;
    }
    function saveCacheSpots(spots){ saveJSON(KEY_CACHE_SPOTS, spots); }

    function loadUserSpots(){
      const arr = loadJSON(KEY_USER_SPOTS, []);
      return Array.isArray(arr) ? arr : [];
    }
    function saveUserSpots(spots){ saveJSON(KEY_USER_SPOTS, spots); }

    function loadFavs(){
      const arr = loadJSON(KEY_FAVS, []);
      return new Set(Array.isArray(arr) ? arr : []);
    }
    function saveFavs(favsSet){ saveJSON(KEY_FAVS, [...favsSet]); }

    // ---------- State ----------
    let remoteSpots = [];      // shared list
    let userSpots = [];        // personal additions
    let spots = [];            // merged
    let favs = loadFavs();
    let onlyFavs = false;
    let page = 1;

    // ---------- UI elements ----------
    const elList = document.getElementById("list");
    const elPager = document.getElementById("pager");
    const elQ = document.getElementById("q");
    const elDistrict = document.getElementById("district");
    const elTag = document.getElementById("tag");
    const elCount = document.getElementById("count");
    const elPageInfo = document.getElementById("pageInfo");

    const modalBack = document.getElementById("modalBack");
    const btnAdd = document.getElementById("btnAdd");
    const btnClose = document.getElementById("btnClose");
    const btnCancel = document.getElementById("btnCancel");
    const btnSave = document.getElementById("btnSave");

    const btnClear = document.getElementById("btnClear");
    const btnExport = document.getElementById("btnExport");
    const btnImport = document.getElementById("btnImport");
    const btnSync = document.getElementById("btnSync");

    const toast = document.getElementById("toast");

    // Modal inputs
    const m_name = document.getElementById("m_name");
    const m_district = document.getElementById("m_district");
    const m_tags = document.getElementById("m_tags");
    const m_best = document.getElementById("m_best");
    const m_lat = document.getElementById("m_lat");
    const m_lng = document.getElementById("m_lng");
    const m_notes = document.getElementById("m_notes");
    const m_link = document.getElementById("m_link");

    // ---------- Helpers ----------
    const uniq = (arr)=> [...new Set(arr)].filter(Boolean);
    function norm(s){ return (s||"").toString().trim().toLowerCase(); }

    function showToast(msg){
      toast.textContent = msg;
      toast.style.display = "block";
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=> toast.style.display="none", 1800);
    }

    function escapeHtml(str){
      return (str||"")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function normalizeSpot(s, i){
      const id = (s && s.id) ? String(s.id) : `spot-${i}-${crypto.randomUUID()}`;
      return {
        id,
        name: s?.name || "Untitled",
        district: s?.district || "",
        tags: Array.isArray(s?.tags) ? s.tags : [],
        vibe: s?.vibe || "",
        bestTime: s?.bestTime || "",
        notes: s?.notes || "",
        lat: (typeof s?.lat==="number") ? s.lat : undefined,
        lng: (typeof s?.lng==="number") ? s.lng : undefined,
        link: s?.link || ""
      };
    }

    function mergeSpots(remoteArr, userArr){
      const map = new Map();
      (remoteArr||[]).forEach((s,i)=> map.set(normalizeSpot(s,i).id, normalizeSpot(s,i)));
      (userArr||[]).forEach((s,i)=> {
        const ns = normalizeSpot(s, 10000+i);
        map.set(ns.id, ns);
      });
      return [...map.values()];
    }

    function openMap(spot){
      if(typeof spot.lat === "number" && typeof spot.lng === "number"){
        const q = encodeURIComponent(`${spot.lat},${spot.lng} (${spot.name})`);
        window.open(`https://www.google.com/maps?q=${q}`, "_blank", "noopener");
      }else{
        const q = encodeURIComponent(`${spot.name} ${spot.district || "å°åŒ—"}`);
        window.open(`https://www.google.com/maps/search/?api=1&query=${q}`, "_blank", "noopener");
      }
    }

    function buildFilters(){
      const districts = uniq(spots.map(s=>s.district)).sort((a,b)=>a.localeCompare(b, "zh-Hant"));
      const tags = uniq(spots.flatMap(s=>s.tags || [])).sort((a,b)=>a.localeCompare(b));
      elDistrict.innerHTML = `<option value="">All districts</option>` + districts.map(d=>`<option value="${escapeHtml(d)}">${escapeHtml(d)}</option>`).join("");
      elTag.innerHTML = `<option value="">All tags</option>` + tags.map(t=>`<option value="${escapeHtml(t)}">${escapeHtml(t)}</option>`).join("");
    }

    function matches(spot, q, district, tag){
      if(onlyFavs && !favs.has(spot.id)) return false;
      if(district && spot.district !== district) return false;
      if(tag && !(spot.tags||[]).includes(tag)) return false;

      if(!q) return true;
      const hay = [
        spot.name, spot.district, (spot.tags||[]).join(" "),
        spot.vibe, spot.bestTime, spot.notes
      ].map(norm).join(" | ");
      return hay.includes(norm(q));
    }

    function tagClass(t){
      const n = norm(t);
      if(n.includes("night") || n.includes("photo") || n.includes("neon")) return "p";
      if(n.includes("quiet") || n.includes("walk") || n.includes("river") || n.includes("bike") || n.includes("minimal")) return "g";
      if(n.includes("cafe") || n.includes("bar") || n.includes("hot") || n.includes("rainy")) return "w";
      if(n.includes("industrial")) return "p";
      return "";
    }

    function resetToFirstPage(){ page = 1; }

    function renderPager(totalPages){
      if(totalPages <= 1){
        elPager.innerHTML = "";
        return;
      }

      const mkBtn = (label, targetPage, isOn=false, disabled=false) => {
        return `<button class="pageBtn ${isOn ? "on":""}" data-page="${targetPage}" ${disabled?"disabled":""}>${label}</button>`;
      };

      let html = "";
      html += mkBtn("â€¹", "prev", false, page<=1);

      // show all pages (ä½ çš„æ•¸é‡ä¸æœƒå¤ªèª‡å¼µï¼›éœ€è¦å†åšçœç•¥ä¹Ÿè¡Œ)
      for(let p=1; p<=totalPages; p++){
        html += mkBtn(String(p), String(p), p===page, false);
      }

      html += mkBtn("â€º", "next", false, page>=totalPages);

      elPager.innerHTML = html;

      elPager.querySelectorAll("button[data-page]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const v = btn.getAttribute("data-page");
          if(v === "prev") page = Math.max(1, page-1);
          else if(v === "next") page = Math.min(totalPages, page+1);
          else page = Number(v) || 1;
          render();
          window.scrollTo({top:0, behavior:"smooth"});
        });
      });
    }

    function render(){
      const q = elQ.value.trim();
      const district = elDistrict.value;
      const tag = elTag.value;

      const filtered = spots
        .filter(s => matches(s, q, district, tag))
        .sort((a,b)=>{
          const af = favs.has(a.id) ? 1 : 0;
          const bf = favs.has(b.id) ? 1 : 0;
          if(af !== bf) return bf - af;
          return a.name.localeCompare(b.name, "zh-Hant");
        });

      const total = filtered.length;
      const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));
      page = Math.min(Math.max(1, page), totalPages);

      elCount.textContent = String(total);
      elPageInfo.textContent = `${page}/${totalPages}`;

      const start = (page-1) * PAGE_SIZE;
      const pageItems = filtered.slice(start, start + PAGE_SIZE);

      elList.innerHTML = pageItems.map(s=>{
        const isFav = favs.has(s.id);
        const tags = (s.tags||[]).map(t=>`<span class="tag ${tagClass(t)}">${escapeHtml(t)}</span>`).join("");
        const meta = [
          s.district ? `ğŸ“ ${escapeHtml(s.district)}` : "",
          s.bestTime ? `â± ${escapeHtml(s.bestTime)}` : ""
        ].filter(Boolean).join(" Â· ");

        return `
          <div class="spot">
            <div class="spotHead">
              <div>
                <h3 class="spotTitle">${escapeHtml(s.name)}</h3>
                <div class="spotMeta">
                  ${meta ? `<span>${meta}</span>` : ""}
                  ${tags}
                </div>
              </div>
            </div>
            <div class="spotBody">
              <div><b style="color:rgba(232,232,240,.95)">Vibeï¼š</b>${escapeHtml(s.vibe || "â€”")}</div>
              ${s.notes ? `<div style="margin-top:6px; color:rgba(167,167,194,.95)">${escapeHtml(s.notes)}</div>` : ""}
              ${s.link ? `<div style="margin-top:8px; font-size:12px; color:rgba(150,255,170,.92)">â†— <a href="${escapeHtml(s.link)}" target="_blank" rel="noopener" style="text-decoration:none; border-bottom:1px solid rgba(57,255,20,.35)">More</a></div>` : ""}
            </div>
            <div class="spotActions">
              <div class="miniRow">
                <button class="miniBtn" data-act="map" data-id="${s.id}">Open map</button>
                <button class="miniBtn" data-act="copy" data-id="${s.id}">Copy</button>
              </div>
              <button class="miniBtn heart ${isFav ? "on" : ""}" data-act="fav" data-id="${s.id}">
                ${isFav ? "â¤ Saved" : "â™¡ Save"}
              </button>
            </div>
          </div>
        `;
      }).join("");

      elList.querySelectorAll("button[data-act]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const id = btn.getAttribute("data-id");
          const act = btn.getAttribute("data-act");
          const spot = spots.find(s=>s.id===id);
          if(!spot) return;

          if(act==="map") openMap(spot);
          if(act==="fav"){
            if(favs.has(id)) favs.delete(id); else favs.add(id);
            saveFavs(favs);
            render();
          }
          if(act==="copy"){
            const line = `${spot.name}ï½œ${spot.district || "å°åŒ—"}ï½œ${(spot.tags||[]).join(", ")}ï½œ${spot.bestTime || ""}`;
            navigator.clipboard?.writeText(line);
            showToast("Copied âœ¨");
          }
        });
      });

      renderPager(totalPages);
    }

    function openModal(){
      modalBack.style.display = "flex";
      setTimeout(()=> m_name.focus(), 10);
    }
    function closeModal(){
      modalBack.style.display = "none";
      [m_name,m_district,m_tags,m_best,m_lat,m_lng,m_notes,m_link].forEach(el=> el.value="");
    }

    function addSpotFromModal(){
      const name = m_name.value.trim();
      if(!name){ showToast("Name required"); m_name.focus(); return; }

      const district = m_district.value.trim();
      const tags = m_tags.value.split(",").map(s=>s.trim()).filter(Boolean);
      const bestTime = m_best.value.trim();
      const notes = m_notes.value.trim();
      const link = m_link.value.trim();

      const lat = m_lat.value.trim() ? Number(m_lat.value.trim()) : undefined;
      const lng = m_lng.value.trim() ? Number(m_lng.value.trim()) : undefined;

      const newSpot = {
        id: `user-${crypto.randomUUID()}`,
        name,
        district,
        tags,
        vibe: "Personal entry",
        bestTime,
        notes,
        link,
        lat: Number.isFinite(lat) ? lat : undefined,
        lng: Number.isFinite(lng) ? lng : undefined
      };

      userSpots.unshift(newSpot);
      saveUserSpots(userSpots);

      spots = mergeSpots(remoteSpots, userSpots);
      buildFilters();

      resetToFirstPage();
      render();
      closeModal();
      showToast("Saved âœ“ (personal)");
    }

    function clearFilters(){
      elQ.value = "";
      elDistrict.value = "";
      elTag.value = "";
      onlyFavs = false;
      resetToFirstPage();
      render();
      showToast("Cleared");
    }

    function exportJSON(){
      const payload = {
        spotsRemote: remoteSpots,
        spotsUser: userSpots,
        favs: [...favs]
      };
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "taipei-afterdark-export.json";
      a.click();
      URL.revokeObjectURL(url);
      showToast("Exported");
    }

    function importJSON(){
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "application/json";
      input.onchange = () => {
        const file = input.files?.[0];
        if(!file) return;
        const reader = new FileReader();
        reader.onload = () => {
          try{
            const parsed = JSON.parse(reader.result);

            // åªæŠŠåŒ¯å…¥ç•¶ä½œã€Œå€‹äººæ¸…å–®ã€(ä¸è¦†è“‹é ç«¯)
            const imported = parsed?.spotsUser || parsed?.spots || [];
            if(Array.isArray(imported)){
              userSpots = imported.map((s,i)=> normalizeSpot(s, 20000+i));
              saveUserSpots(userSpots);
            }

            if(Array.isArray(parsed?.favs)){
              favs = new Set(parsed.favs);
              saveFavs(favs);
            }

            spots = mergeSpots(remoteSpots, userSpots);
            buildFilters();
            resetToFirstPage();
            render();
            showToast("Imported âœ“");
          }catch(e){
            showToast("Import failed");
          }
        };
        reader.readAsText(file);
      };
      input.click();
    }

    async function fetchRemoteSpots(){
  if(!REMOTE_SPOTS_URL) return null;

  const bust = (REMOTE_SPOTS_URL.includes("?") ? "&" : "?") + "v=" + Date.now();
  const url = REMOTE_SPOTS_URL + bust;

  const res = await fetch(url, { cache: "no-store" });
  const text = await res.text();

  // --- é˜²å‘†ï¼šå¦‚æœæŠ“åˆ°çš„æ˜¯ HTMLï¼ˆé€šå¸¸æ˜¯ 404 é ï¼‰ï¼Œç«‹åˆ»å ±éŒ¯ ---
  const head = text.trim().slice(0, 40).toLowerCase();
  if(head.startsWith("<!doctype") || head.startsWith("<html") || head.includes("<head")){
    throw new Error("Got HTML instead of JSON (wrong path / Pages not updated)");
  }

  // --- é˜²å‘†ï¼šå»æ‰ BOMï¼ˆæœ‰äº›ç’°å¢ƒæœƒå®³ res.json() å¤±æ•—ï¼‰ ---
  const clean = text.replace(/^\uFEFF/, "");

  let data;
  try{
    data = JSON.parse(clean);
  }catch(e){
    console.error("spots.json raw text (first 200 chars):", clean.slice(0,200));
    throw new Error("JSON.parse failed (spots.json is not valid JSON)");
  }

  const arr = Array.isArray(data) ? data : (Array.isArray(data?.spots) ? data.spots : null);
  if(!Array.isArray(arr)) throw new Error("Invalid remote JSON shape");

  return arr.map((s,i)=> normalizeSpot(s,i));
}

    async function syncRemote(){
      try{
        const arr = await fetchRemoteSpots();
        if(!arr) return;

        remoteSpots = arr;
        saveCacheSpots(remoteSpots);

        spots = mergeSpots(remoteSpots, userSpots);
        buildFilters();
        resetToFirstPage();
        render();
        showToast("Synced from remote âœ“");
      }catch(e){
        showToast("Remote offline â€” using cache");
      }
    }

    // ---------- Events ----------
    elQ.addEventListener("input", ()=>{ resetToFirstPage(); render(); });
    elDistrict.addEventListener("change", ()=>{ resetToFirstPage(); render(); });
    elTag.addEventListener("change", ()=>{ resetToFirstPage(); render(); });

    btnAdd.addEventListener("click", openModal);
    btnClose.addEventListener("click", closeModal);
    btnCancel.addEventListener("click", closeModal);
    btnSave.addEventListener("click", addSpotFromModal);

    modalBack.addEventListener("click", (e)=>{ if(e.target === modalBack) closeModal(); });

    btnClear.addEventListener("click", clearFilters);
    btnExport.addEventListener("click", exportJSON);
    btnImport.addEventListener("click", importJSON);
    btnSync.addEventListener("click", syncRemote);

    window.addEventListener("keydown", (e)=>{
      if(e.key === "/"){ e.preventDefault(); elQ.focus(); }
      if(e.key === "Escape"){
        if(modalBack.style.display === "flex") closeModal();
        else clearFilters();
      }
      if(e.key.toLowerCase() === "f"){
        onlyFavs = !onlyFavs;
        resetToFirstPage();
        render();
        showToast(onlyFavs ? "Favorites only" : "All spots");
      }
      // number keys jump pages (1..9)
      if(/^[1-9]$/.test(e.key)){
        const n = Number(e.key);
        page = n;
        render();
      }
    });

    // ---------- Init ----------
    (function boot(){
      userSpots = loadUserSpots();

      // load cache first for instant render
      const cached = loadCacheSpots();
      remoteSpots = Array.isArray(cached) && cached.length ? cached : fallbackSeed;

      spots = mergeSpots(remoteSpots, userSpots);
      buildFilters();
      render();

      // then try remote in background
      syncRemote();
    })();
  </script>
</body>
</html>
